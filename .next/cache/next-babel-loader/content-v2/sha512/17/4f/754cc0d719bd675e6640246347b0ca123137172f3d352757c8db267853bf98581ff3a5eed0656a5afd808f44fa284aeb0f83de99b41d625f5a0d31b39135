{"ast":null,"code":"var __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from \"react\";\nimport SideMenu from \"../components/sideMenu\";\nimport Carousel from \"../components/carousel\";\nimport MovieList from \"../components/movieList\";\nimport { getMovies, getCategories } from \"../actions/index\";\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleChangeCategory\", category => {\n      this.setState({\n        filter: [category.id, category.name]\n      });\n    });\n\n    _defineProperty(this, \"filterMovies\", movies => {\n      if (this.state.filter[0] === 0) return movies;\n      return movies.filter(m => {\n        return m.genre_ids && m.genre_ids.includes(this.state.filter[0]);\n      });\n    });\n\n    this.state = {\n      filter: [0, \"Todos\"]\n    };\n  } // wait for the movies on server side before renders on browser\n\n\n  static async getInitialProps() {\n    const movies = await getMovies();\n    const categories = await getCategories(); // let movies = [];\n    // let categories = [];\n    // getMovies()\n    //   .then((result) => {\n    //     movies = result;\n    //   })\n    //   .catch((error) => {\n    //     console.error(error);\n    //   });\n    // getCategories()\n    //   .then((result) => {\n    //     categories = result;\n    //   })\n    //   .catch((error) => {\n    //     console.error(error);\n    //   });\n\n    const images = movies.map(movie => {\n      return {\n        id: `image-${movie.id}`,\n        backdrop_path: movie.backdrop_path,\n        title: movie.title\n      };\n    });\n    return {\n      movies,\n      categories,\n      images\n    };\n  }\n\n  // // called only on Client (Browser...)\n  // componentDidMount() {\n  //\n  // }\n  render() {\n    const {\n      movies,\n      images,\n      categories\n    } = this.props;\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"home-page\"\n    }, __jsx(\"div\", {\n      className: \"container-fluid\"\n    }, __jsx(\"div\", {\n      className: \"row\"\n    }, __jsx(\"div\", {\n      className: \"col-lg-3\"\n    }, __jsx(SideMenu, {\n      changeCategory: this.handleChangeCategory,\n      activeCategory: this.state.filter[0],\n      appName: \"Categorias\",\n      categories: categories || []\n    })), __jsx(\"div\", {\n      className: \"col-lg-9\"\n    }, __jsx(Carousel, {\n      images: images || []\n    }), __jsx(\"h4\", {\n      className: \"my-4 c-red\"\n    }, \"Mostrando \", this.state.filter[1], \" Filmes\", \" \"), __jsx(\"div\", {\n      className: \"row\"\n    }, __jsx(MovieList, {\n      movies: this.filterMovies(movies) || []\n    })))))));\n  }\n\n} // Functional component\n// const Home = () => {\n//   const [movies, setMovies] = useState([]);\n//   useEffect(() => {\n//     getMovies().then((movies) => {\n//       setMovies(movies);\n//     });\n//   }, []);\n//   return (\n//     <div>\n//       <Head>\n//         <title>Home</title>\n//         <link\n//           rel=\"stylesheet\"\n//           href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\"\n//           integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\"\n//           crossOrigin=\"anonymous\"\n//         />\n//         <script\n//           src=\"https://code.jquery.com/jquery-3.3.1.slim.min.js\"\n//           integrity=\"sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo\"\n//           crossOrigin=\"anonymous\"\n//         ></script>\n//         <script\n//           src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js\"\n//           integrity=\"sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1\"\n//           crossOrigin=\"anonymous\"\n//         ></script>\n//         <script\n//           src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js\"\n//           integrity=\"sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM\"\n//           crossOrigin=\"anonymous\"\n//         ></script>\n//       </Head>\n//       <Navbar />\n//       <div className=\"home-page\">\n//         <div className=\"container-fluid\">\n//           <div className=\"row\">\n//             <div className=\"col-lg-3\">\n//               <SideMenu appName={\"Movie DB\"} />\n//             </div>\n//             <div className=\"col-lg-9\">\n//               <Carousel />\n//               <div className=\"row\">\n//                 <MovieList movies={movies} />\n//               </div>\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n//       <Footer />\n//       <style jsx>{`\n//         .home-page {\n//           padding-top: 80px;\n//         }\n//       `}</style>\n//     </div>\n//   );\n// };\n\n\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}